{% extends 'base.html' %}

{% block content %}

<div class="d-flex flex-column justify-content-center align-items-center px-4 py-5 my-5 text-center">
    {% if form.non_field_errors %}
        {% for message in form.non_field_errors %}
            <div class="alert alert-danger" role="alert">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    {% for realm, login_link in login_realms %}
        <form action="{{ login_link }}" method="POST">{% csrf_token %}
            <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_to }}" required>
            <button href="{{ login_link }}" class="btn btn-primary w-100 py-2">Sign in with {{ realm }}</button>
        </form>
        {% if not forloop.last or form %}
            <h3 class="text-center">or</h3>
        {% endif %}
    {% endfor %}
    {% if form %}
        <form action="{{ login_link }}" method="POST">{% csrf_token %}
            <h3 class="mt-5">
                {% if login_realms %}
                    Use local credentials
                {% else %}
                    Sign in
                {% endif %}
            </h3>
            <div class="mb-4">
                {% for ff in form %}
                    <div class="form-floating">
                        {{ ff }}
                        <label for="floatingInput">{{ ff.label }}</label>
                    </div>
                {% endfor %}
            </div>
            <div class="my-3">
                <p class="mb-4"><a href="{% url 'password_reset' %}">Password forgotten?</a></p>
            </div>
            <p class="mb-4">
                <button class="btn btn-primary px-5 py-2" type="submit">
                    Sign in{% if login_realms %} with local credentials{% endif %}
                </button>
            </p>
        </form>
    {% endif %}
</div>
{% endblock %}
